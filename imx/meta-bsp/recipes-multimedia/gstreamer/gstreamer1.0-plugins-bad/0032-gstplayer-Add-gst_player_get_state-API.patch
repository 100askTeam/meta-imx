From 2e65dcff85129ae3a15afb619ba61b2c838ada39 Mon Sep 17 00:00:00 2001
From: Lyon Wang <lyon.wang@nxp.com>
Date: Fri, 17 Feb 2017 17:22:31 +0800
Subject: [PATCH 1/3] gstplayer: Add gst_player_get_state() API

- Add gst_player_get_state() API

https://bugzilla.gnome.org/show_bug.cgi?id=778379
Upstream-Status: Submitted 

Signed-off-by: Lyon Wang <lyon.wang@nxp.com>
---
 gst-libs/gst/player/gstplayer.c | 20 ++++++++++++++++++++
 gst-libs/gst/player/gstplayer.h |  2 ++
 2 files changed, 22 insertions(+)

diff --git a/gst-libs/gst/player/gstplayer.c b/gst-libs/gst/player/gstplayer.c
index 3fe0609..d0aec41 100644
--- a/gst-libs/gst/player/gstplayer.c
+++ b/gst-libs/gst/player/gstplayer.c
@@ -4570,3 +4570,23 @@ gst_player_get_video_snapshot (GstPlayer * self,
 
   return sample;
 }
+
+/**
+ * gst_player_get_state:
+ * @player: #GstPlayer instance
+ *
+ * Gets internal GstPlayer state.
+ * It's not guaranteed that the state returned is the current state,
+ * it might've changed in the meantime.
+ *
+ * Returns: (transfer none): internal GstPlayerState
+ *
+ * Since 1.12
+ */
+GstPlayerState
+gst_player_get_state (GstPlayer * self)
+{
+  g_return_val_if_fail (GST_IS_PLAYER (self), GST_PLAYER_STATE_STOPPED);
+
+  return self->app_state;
+}
\ No newline at end of file
diff --git a/gst-libs/gst/player/gstplayer.h b/gst-libs/gst/player/gstplayer.h
index 91eaa3e..3fb323b 100644
--- a/gst-libs/gst/player/gstplayer.h
+++ b/gst-libs/gst/player/gstplayer.h
@@ -227,6 +227,8 @@ gboolean    gst_player_config_get_force_aspect_ratio (const GstStructure * confi
 gboolean    gst_player_set_audio_sink (GstPlayer * player, const gchar * sink_name);
 gboolean    gst_player_set_text_sink (GstPlayer * player, const gchar * sink_name);
 
+GstPlayerState  gst_player_get_state (GstPlayer * player);
+
 G_END_DECLS
 
 #endif /* __GST_PLAYER_H__ */
-- 
1.9.1

